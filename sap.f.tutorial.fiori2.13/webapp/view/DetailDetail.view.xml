<mvc:View
	controllerName="zychcn.zbundle01.controller.DetailDetail"
	xmlns="sap.uxap"
	xmlns:m="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc">
	<ObjectPageLayout
		showTitleInHeaderContent="true"
		alwaysShowContentHeader="false"
		preserveHeaderStateOnScroll="false"
		headerContentPinnable="true"
		isChildPage="true"
		upperCaseAnchorBar="false">
		<headerTitle>
			<ObjectPageDynamicHeaderTitle>
				<navigationActions>
					<m:OverflowToolbarButton
						type="Transparent"
						icon="sap-icon://full-screen"
						press=".handleFullScreen"
						tooltip="Enter Full Screen Mode"
						visible="{= ${/actionButtonsInfo/endColumn/fullScreen} !== null }"/>
					<m:OverflowToolbarButton
						type="Transparent"
						icon="sap-icon://exit-full-screen"
						press=".handleExitFullScreen"
						tooltip="Exit Full Screen Mode"
						visible="{= ${/actionButtonsInfo/endColumn/exitFullScreen} !== null }"/>
					<m:OverflowToolbarButton
						type="Transparent"
						icon="sap-icon://decline"
						press=".handleClose"
						tooltip="Close column"
						visible="{= ${/actionButtonsInfo/endColumn/closeColumn} !== null }"/>
				</navigationActions>
			</ObjectPageDynamicHeaderTitle>
		</headerTitle>

		<headerContent>
			<m:HBox>
				<core:Icon
					src="sap-icon://add-coursebook"
					size="4rem"
					backgroundColor="cornflowerblue"
					color="white">
					<core:layoutData>
						<m:FlexItemData growFactor="1" />
					</core:layoutData>
				</core:Icon>
				<m:VBox>
					<m:Text text="{i18n>groupID}: {detail>GrpCode}"/>
					<m:Text text="{i18n>GruopScope}: {detail>GrpScopeDesc}-{detail>GrpScope}" editable="{= !!${/bEdit}}"/>
					<m:Text text="{i18n>GroupDesc}: {detail>GrpText}"/>
				</m:VBox>
			</m:HBox>
		</headerContent>
		<sections>
			<ObjectPageSection title="{i18n>addProduct}">
				<subSections>
					<ObjectPageSubSection>
						<actions>
                            <m:OverflowToolbarButton
                                type="Transparent"
                                icon="sap-icon://add"
                                press=".editAddProduct" 
								visible="{= !!${/bEdit}}" />
                        </actions>
						<blocks>
							<m:Table
								items="{path : 'detail>ToItem/results'}">
								<m:columns>
									<m:Column  visible="{= !!${/bEdit}}"/>
									<m:Column>
										<m:Text text="{i18n>Product}"/>
									</m:Column>
									<m:Column>
										<m:Text text="{i18n>ProductDesc}"/>
									</m:Column>
									<m:Column>
										<m:Text text="{i18n>ValidFrom}"/>
									</m:Column>
									<m:Column>
										<m:Text text="{i18n>ValidTo}"/>
									</m:Column>
									<m:Column>
										<m:Text text="{i18n>Productcannotbeselected}"/>
									</m:Column>									
								</m:columns>
								<m:items>
									<m:ColumnListItem>
										<m:cells>
											<m:HBox>
												<m:cells>
													<m:Button icon="sap-icon://delete" type="Transparent" press="editDeleteRow" ariaLabelledBy="editButtonLabel" visible="{= !!${/bEdit}}"/>
												</m:cells>
												<m:ObjectIdentifier text="{detail>Product}" visible="{= !${/bEdit}}"/>
												<m:Input 
													value="{detail>Product}" 
													showValueHelp="true"
													valueHelpOnly="false"
													valueHelpRequest=".onValueHelpRequested"
													suggestionItems="{
														path: 'invoice>/SHScopeSet',
														filters: [
															{path: 'GrpScope', operator: 'EQ', value1: '01'},
															{path: 'BuId', operator: 'EQ', value1: '2000030162'}
														]
													}"
													visible="{= !!${/bEdit}}" 
												>	
													<core:Item key="{invoice>Product}" text="{invoice>Product}-{invoice>ProductDescZh}" />
												</m:Input>
											</m:HBox>

											<!-- <m:ObjectIdentifier text="{detail>Product}"/> -->
											<!-- https://dev.abbott-md.cn:4443/sap/opu/odata/SAP/ZYCHCN_API_ORDER_002_SRV/SHScopeSet?$filter=%20GrpScope%20eq%20%2701%27%20and%20BuId%20eq%20%272000030056%27&$format=json -->
											<!-- ODATA service的input 是GrpScope = 01 && BuId = **** -->
											<!-- Edit里添加新一行的时候也需要这个控件 -->
										</m:cells>
										<m:cells>
											<m:VBox>
												<m:ObjectIdentifier text="{detail>ProducDesc}"/>
											</m:VBox>
										</m:cells>
										<m:cells>
											<m:HBox>
												<m:ObjectIdentifier text="{
														path: 'detail>ValidFrom',
														type: 'sap.ui.model.type.Date',
														formatOptions: {
															style: 'medium',
															pattern: 'yyyy-MM-dd'
														}
													}"/>
												<!-- <m:DatePicker value="{
													path: 'detail>ValidFrom',
													type: 'sap.ui.model.type.Date',
													formatOptions: {
														style: 'medium',
														pattern: 'yyyy-MM-dd'
													}
												}" visible="{= !!${/bEdit}}" valueFormat="yyyy-MM-dd" minDate="{setting>/minDate}"/> -->
											</m:HBox>
										</m:cells>
										<m:cells>
											<m:HBox>
												<m:ObjectIdentifier text="{
														path: 'detail>ValidTo',
														type: 'sap.ui.model.type.Date',
														formatOptions: {
															style: 'medium',
															pattern: 'yyyy-MM-dd'
														}
													}" visible="{= !${/bEdit}}"/>
												<m:DatePicker value="{
													path: 'detail>ValidTo',
													type: 'sap.ui.model.type.Date',
													formatOptions: {
														style: 'medium',
														pattern: 'yyyy-MM-dd'
													}
												}" visible="{= !!${/bEdit}}" valueFormat="yyyy-MM-dd" minDate="{setting>/minDate}"/>
											</m:HBox>
										</m:cells>
										<m:cells>
											<m:CheckBox selected="true"/>
										</m:cells>
									</m:ColumnListItem>
								</m:items>
							</m:Table>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
		</sections>
	</ObjectPageLayout>
</mvc:View>